## 通信协议
ARP协议
>> 复杂的程序都需要分层，软件设计的要求

负载均衡
>> 二层负载->Mac地址，VIP(虚拟IP)每个机器的MAC不一样，IP地址相同
>> 三层负载->IP 对外提供VIP，集群中的每个机器采用不同的IP地址
>> 四层负载->传输层的负载，包含IP和端口 修改IP地址或者端口地址
>> 七层负载->应用层，请求的URL，http请求的报文来进行负载

<br>
TCP/IP协议 可靠的协议
1、建立连接的机制
2、三次握手建立连接
3、SYN攻击
4、连接的关闭，四次挥手
5、TCP是全双工
6、长连接 ->发送心跳包维持连接

<br>
UDP/IP协议 不可靠

## 在应用中如何去构建一个传输的案例
socket->套接字
socket==文件流

通信过程中的阻塞
accept阻塞（连接阻塞）
流操作的阻塞（read/write）


非阻塞
## BIO模型

基于线程优化的BIO,可以解决IO阻塞问题。
线程池去分发请求，不让服务端出现阻塞

## NIO机制
new io/no -blocker io

## 什么叫多路复用呢
客户端注册一个监听到服务端(服务端监听多个fd->socket链接，1000个发现其中一个fd是就绪状态)；服务端准备好数据回复；客户端发Read请求；服务端返回数据
linux中提供的IO复用方式

select/poll
fd:socket

epoll->事件驱动



同步非阻塞
异步非阻塞

epoll
提升并发连接数
>> 怎么去标识一个TCP连接；四元组：source_ip/source_port/target_ip,target_port
source_port:65535 2的16次方
source_ip:2的32次方
2的48次方
1、内存大小
2、文件句柄的限制(can't open so many filed)
3、ulimit -n 1024
4、带宽的资源

1、取决于软件和硬件
2、



1. tcp/ip的三次握手和四次挥手是什么概念，以及状态变化过程？
>> TCP/IP的三次握手建立连接和四次挥手断开连接

2. 建立连接需要3次，为什么断开连接需要4次？
>> 关闭连接时，当Server端收到FIN报文时，很可能并不会立即关闭SOCKET（因为可能还有消息没有处理完），所以只能先回复一个ACK报文给Client端。
3. 三次握手有哪些不安全性？
最后Client回应Server的ACK包可以被Flood攻击

4. TCP和UDP的区别？TCP是通过什么方式来保证可靠性的
>> TCP是可靠的
1、建立连接的机制
2、三次握手建立连接
3、SYN攻击
4、连接的关闭，四次挥手
5、TCP是全双工
6、长连接 ->发送心跳包维持连接

5. tcp四层网络模型和osi七层网络模型分别是什么？以及每一层的作用
>> 四层是应用层，传输层，网络层，网络接口层
七层是应用层，表示层，会话层，传输层，网络层，数据链路层，物理层
6. 什么是滑动窗口协议？它的实现原理是什么？
>> 滑动窗口是一种流量控制技术；
发送方和接收方维护一个数据帧的序列，发送端可以不等待应答而连续发送帧数；
7. 服务器上TIME_WAIT状态的连接过多，怎么解决？
>> 解决阻塞的根源
8. 什么是NIO、BIO、AIO？他们的区别？
>> NIO是非阻塞IO模型，BIO是阻塞IO模型，
Java BIO ： 同步并阻塞，服务器实现模式为一个连接一个线程，即客户端有连接请求时服务器端就需要启动一个线程进行处理，如果这个连接不做任何事情会造成不必要的线程开销，当然可以通过线程池机制改善。

Java NIO ： 同步非阻塞，服务器实现模式为一个请求一个线程，即客户端发送的连接请求都会注册到多路复用器上，多路复用器轮询到连接有I/O请求时才启动一个线程进行处理。

Java AIO(NIO.2) ： 异步非阻塞，服务器实现模式为一个有效请求一个线程，客户端的I/O请求都是由OS先完成了再通知服务器应用去启动线程进行处理

9. 了解过多路复用吗？它是一个什么实现原理？
>> IO多路复用可以通过把多个I/O的阻塞复用到同一个select的阻塞上，从而使得系统在单线程的情况下可以同时处理多个客户端的请求；
10. epool和select的区别是什么？
select在单个进程中打开的fd是有限制的，默认是1024个；
>> epoll是基于事件驱动方式代替select的顺序扫描，性能相对来说更高，所能支持的fd上限是操作系统的最大文件句柄；